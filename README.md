一、核心概念
1.1 并行度 （Parallelism）
每个算子的子任务数
1.2 算子链
一对一 （one-to-one, forwarding）
在该模式下，数据流维护着分区以及元素的顺序。map、filter、flatMap、等算子都是one-to-one的对应关系
重分区（Redistributing）
根据传输策略，把数据发送到不同的下游目标任务
合并算子链
并行度相同的一对一算子操作，可以直接链接在一起形成一个“大”任务(task)
1.3 任务槽（Task Slots）
Flink中每个TaskManager都是一个JVM进程，可以启动多个独立的线程，并行执行多个子任务。每个任务槽表示了TaskManager拥有计算机资源（内存）的一个固定大小的子集

二、窗口（Window）
Flink是一种流式计算引擎，主要是来处理无界数据流的。为了更加高效的处理无界流，一种方式就是将无限的数据切割成有限的“数据块”进行处理，这就是所谓的“窗口”(window)。
2.1 窗口分类
2.1.1 按驱动类型分类
时间窗口（Time Windows）
以时间来定义窗口的开始（start）和结束（end）
计数窗口（Count Windows）
基于元素个数来截取数据
2.1.2 按窗口分配数据的规则分类
滚动窗口（Tumbling Windows）
滚动窗口具有固定大小，是一种进行“均匀切分”的划分方式。窗口间没有重叠，也没有间隔。每个数据都会被分配到一个窗口中，而且只会属于一个窗口
滑动窗口（Sliding Windows）
滑动窗口具固定大小，但窗口之间并不是首尾相接的。滑动窗口除了窗口大小（Window size）还有一个滑动步长（window slide）他其实就代表了窗口的计算频率。滚动窗口可以看作是一个特殊的滑动窗口
会话窗口（Session Windows）
基于会话（session）来对数据进行分组的。会话窗口长度不固定，起始和结束也不固定，各个分区间没有关联。会话窗口的数据一定是不会出现重叠的。
全局窗口（Global Windows）
窗口没有结束的时候默认不会触发计算

三、时间语义
事件时间：一个数据产生的时间（时间戳Timestamp）
处理时间： 数据真正被处理的时刻

四、水位线
在Flink中，用来衡量事件时间进展的标记被称作“水位线”（Watermark）
水位线可以看作是一个特殊的数据记录，他是插入到数据流中的一个标记点，主要内容是一个时间戳，用来指示当前事件的时间。
4.1 水位线特性
1. 水位线是插入到数据流中的一个标记，可以认为是一个特殊的数据
2. 水位线主要内容是一个时间戳，用来表示当前事件时间的进展
3. 水位线是基于数据的时间戳生成的
4. 水位线的时间戳必须是单调递增的，以确保任务的事件时间一直在往前推进
5. 水位线可以通过设置延迟，来保证正确处理乱序数据
6. 一个水位线Watermark，表示当前事件流中的事件已经达到了时间戳t，这代表t之前所有的数据都到齐了，之后流中不会出现时间戳小于t的数据
4.2 迟到数据处理
4.2.1 推迟水位线推进
延迟产生时，设置一个乱序容忍度，推迟系统时间的推进，保证窗口计算被延迟执行，为乱序的数据争取更多的时间进入窗口。
WatermarkStrategy.forBoundedOutOfOrderness(Duration.ofSeconds(10))
4.2.2 设置窗口延迟关闭
Flink的窗口允许迟到数据，当触发了窗口计算后，会先计算当前的结果，但此时不会关闭窗口。
以后每来一条数据，就触发这条数据所在窗口计算。直到watermark超过了窗口的结束时间+推迟时间。
4.2.3 使用侧流接收迟到数据

五、状态管理

